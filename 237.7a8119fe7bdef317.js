"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[237],{6237:(R,h,l)=>{l.r(h),l.d(h,{WordDetailComponent:()=>M});var p=l(9772),d=l(177),e=l(4438),g=l(7152),m=l(5651);function u(i,a){if(1&i&&(e.j41(0,"span",20),e.EFF(1),e.k0s()),2&i){const n=e.XpG(2);e.R7$(),e.JRh(n.emoji)}}function _(i,a){if(1&i&&(e.j41(0,"p",21),e.EFF(1),e.k0s()),2&i){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.word.phonetic||n.word.pronunciation," ")}}function f(i,a){if(1&i&&(e.j41(0,"p",22),e.EFF(1),e.k0s()),2&i){const n=e.XpG(2);e.R7$(),e.JRh(n.word.category)}}function b(i,a){if(1&i&&(e.j41(0,"div",33),e.EFF(1),e.k0s()),2&i){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.phonetic)}}function k(i,a){if(1&i){const n=e.RV6();e.j41(0,"div",26)(1,"div",27)(2,"div",28),e.EFF(3),e.k0s(),e.j41(4,"div",29),e.EFF(5),e.k0s(),e.DNE(6,b,2,1,"div",30),e.k0s(),e.j41(7,"div",31)(8,"button",32),e.bIt("click",function(){const r=e.eBV(n).$implicit,t=e.XpG(3);return e.Njj(t.togglePlayPhrase(r,"female"))}),e.EFF(9),e.k0s(),e.j41(10,"button",32),e.bIt("click",function(){const r=e.eBV(n).$implicit,t=e.XpG(3);return e.Njj(t.togglePlayPhrase(r,"male"))}),e.EFF(11),e.k0s()()()}if(2&i){const n=a.$implicit,o=e.XpG(3);e.R7$(3),e.JRh(n.lao),e.R7$(2),e.JRh(n.english),e.R7$(),e.Y8G("ngIf",n.phonetic),e.R7$(2),e.BMQ("aria-label",(o.isPlayingPhrase(n,"female")?"Stop":"Play")+" female audio"),e.R7$(),e.SpI(" ",o.isPlayingPhrase(n,"female")?"\u23f9 F":"\u25b6 F"," "),e.R7$(),e.BMQ("aria-label",(o.isPlayingPhrase(n,"male")?"Stop":"Play")+" male audio"),e.R7$(),e.SpI(" ",o.isPlayingPhrase(n,"male")?"\u23f9 M":"\u25b6 M"," ")}}function P(i,a){if(1&i&&(e.j41(0,"section",23)(1,"h2"),e.EFF(2,"Phrases containing this word"),e.k0s(),e.j41(3,"div",24),e.DNE(4,k,12,7,"div",25),e.k0s()()),2&i){const n=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",n.relatedPhrases)}}function w(i,a){1&i&&(e.j41(0,"section",34)(1,"p"),e.EFF(2,"No phrases found containing this word."),e.k0s()())}function y(i,a){if(1&i){const n=e.RV6();e.j41(0,"main")(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),e.EFF(5),e.k0s(),e.DNE(6,u,2,1,"span",10),e.k0s(),e.j41(7,"button",11),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.likeService.toggle("word:"+r.word.id))}),e.EFF(8," \u2605 "),e.k0s()(),e.j41(9,"div",12)(10,"p",13),e.EFF(11),e.k0s(),e.DNE(12,_,2,1,"p",14)(13,f,2,1,"p",15),e.k0s()(),e.DNE(14,P,5,1,"section",16)(15,w,3,0,"section",17),e.j41(16,"div",18)(17,"a",19),e.EFF(18," Feedback "),e.k0s()()()}if(2&i){const n=e.XpG();e.R7$(5),e.JRh(n.word.lao),e.R7$(),e.Y8G("ngIf",n.emoji),e.R7$(),e.AVh("liked",n.likeService.isLiked("word:"+n.word.id)),e.R7$(4),e.JRh(n.word.english),e.R7$(),e.Y8G("ngIf",n.word.phonetic||n.word.pronunciation),e.R7$(),e.Y8G("ngIf",n.word.category),e.R7$(),e.Y8G("ngIf",n.relatedPhrases.length>0),e.R7$(),e.Y8G("ngIf",0===n.relatedPhrases.length),e.R7$(2),e.Y8G("href",n.getFeedbackUrl(),e.B4B)}}function C(i,a){1&i&&(e.j41(0,"div",35)(1,"p"),e.EFF(2,"Word not found."),e.k0s(),e.j41(3,"a",36),e.EFF(4,"Return to Dictionary"),e.k0s()())}let M=(()=>{class i{constructor(n,o,r,t){this.route=n,this.kbService=o,this.likeService=r,this.document=t,this.word=null,this.relatedPhrases=[],this.emoji="",this.wordId="",this.audio=null,this.playingPhraseId=null,this.playingPhrasesGender=null}ngOnInit(){this.route.paramMap.subscribe(n=>{const o=n.get("id");o&&(this.wordId=o,this.loadWordDetails())}),this.kbService.getKnowledgeBase().subscribe(n=>{n&&this.wordId&&this.loadWordDetails()})}loadWordDetails(){this.word=this.kbService.getVocabularyById(this.wordId)||null,this.word&&(this.relatedPhrases=this.findRelatedPhrases(this.word),this.emoji=this.findEmoji(this.word))}findRelatedPhrases(n){const r=this.kbService.getKnowledgeBaseSync()?.phrases||[],t=n.lao?.toLowerCase()||"",s=n.english?.toLowerCase()||"";return t||s?r.filter(c=>{const v=c.lao?.toLowerCase()||"",E=c.english?.toLowerCase()||"",F=t&&v.includes(t),O=s&&E.split(/\s+/).some(j=>j.replace(/[.,!?;:]/,"")===s);return F||O}):[]}findEmoji(n){if(n.emoji)return n.emoji;const o=n.english?.toLowerCase()||"",r={elephant:"\u{1f418}",horse:"\u{1f434}",dog:"\u{1f415}",cat:"\u{1f408}",fish:"\u{1f41f}",bird:"\u{1f426}",tiger:"\u{1f405}",buffalo:"\u{1f403}",cow:"\u{1f404}",pig:"\u{1f416}",chicken:"\u{1f414}",duck:"\u{1f986}",monkey:"\u{1f412}",snake:"\u{1f40d}",rice:"\u{1f35a}",water:"\u{1f4a7}",food:"\u{1f37d}\ufe0f",house:"\u{1f3e0}",car:"\u{1f697}",tree:"\u{1f333}",flower:"\u{1f338}",sun:"\u2600\ufe0f",moon:"\u{1f319}",star:"\u2b50",rain:"\u{1f327}\ufe0f",mountain:"\u26f0\ufe0f",river:"\u{1f3de}\ufe0f",book:"\u{1f4d6}",phone:"\u{1f4f1}",computer:"\u{1f4bb}",money:"\u{1f4b0}",heart:"\u2764\ufe0f",hand:"\u270b",eye:"\u{1f441}\ufe0f",ear:"\u{1f442}",mouth:"\u{1f444}",nose:"\u{1f443}",good:"\u{1f44d}",bad:"\u{1f44e}",happy:"\u{1f60a}",sad:"\u{1f622}",love:"\u2764\ufe0f",beautiful:"\u{1f33a}",hot:"\u{1f525}",cold:"\u2744\ufe0f",big:"\u{1f4cf}",small:"\u{1f50d}",eat:"\u{1f374}",drink:"\u{1f964}",sleep:"\u{1f634}",walk:"\u{1f6b6}",run:"\u{1f3c3}",work:"\u{1f4bc}",school:"\u{1f3eb}",hospital:"\u{1f3e5}",market:"\u{1f3ea}",temple:"\u{1f6d5}",friend:"\u{1f465}",family:"\u{1f468}\u200d\u{1f469}\u200d\u{1f467}\u200d\u{1f466}",baby:"\u{1f476}",man:"\u{1f468}",woman:"\u{1f469}",boy:"\u{1f466}",girl:"\u{1f467}"};if(r[o])return r[o];for(const[t,s]of Object.entries(r))if(o.includes(t)||t.includes(o))return s;return""}isPlayingPhrase(n,o){return this.playingPhraseId===n.id&&this.playingPhrasesGender===o}togglePlayPhrase(n,o){this.isPlayingPhrase(n,o)?this.stopAudio():this.playPhraseAudio(n,o)}playPhraseAudio(n,o){this.stopAudio();const t=`${this.document.querySelector("base")?.getAttribute("href")||"/"}assets/audio/${encodeURIComponent(n.id)}_${o}.mp3`,s=new Audio(t);s.preload="none";const c=()=>{this.audio===s&&(this.audio=null,this.playingPhraseId=null,this.playingPhrasesGender=null)};s.addEventListener("ended",c),s.addEventListener("pause",c),s.addEventListener("error",()=>{console.warn(`Failed to load audio: ${t}`),c()}),this.audio=s,this.playingPhraseId=n.id,this.playingPhrasesGender=o,s.play().catch(()=>{c()})}stopAudio(){if(!this.audio)return this.playingPhraseId=null,void(this.playingPhrasesGender=null);try{this.audio.pause(),this.audio.currentTime=0}finally{this.audio=null,this.playingPhraseId=null,this.playingPhrasesGender=null}}getFeedbackUrl(){const o=this.word?`Feedback: ${this.word.english||this.word.id} (${this.word.id})`:"Feedback: word page",r=typeof window<"u"&&window.location?window.location.href:"",t=[];return r&&t.push(`Link: ${r}`),this.word&&(t.push(`Word: ${this.word.lao} \u2014 ${this.word.english||""}`),this.emoji&&t.push(`Emoji: ${this.emoji}`)),t.push(""),t.push("What is the problem? (write in Lao if possible)"),t.push("- [ ] Meaning is wrong"),t.push("- [ ] Lao spelling is wrong"),t.push("- [ ] Pronunciation is wrong"),t.push("- [ ] Missing example phrase"),t.push("- [ ] Emoji is wrong"),t.push("- [ ] Technical problem (app does not work)"),t.push("- [ ] Other"),t.push(""),t.push("Your correction / suggestion:"),t.push(""),t.push(""),t.push("Example (optional):"),t.push("- Lao sentence:"),t.push("- English translation (optional):"),`https://github.com/robotnic/lao/issues/new?${new URLSearchParams({title:o,body:t.join("\n"),labels:"bug,enhancement"}).toString()}`}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(p.nX),e.rXU(g.r),e.rXU(m.v),e.rXU(d.qQ))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-word-detail"]],standalone:!0,features:[e.aNF],decls:8,vars:2,consts:[["notFound",""],[1,"page"],[1,"container"],[1,"header"],["routerLink","/dict",1,"back-link"],[4,"ngIf","ngIfElse"],[1,"word-header"],[1,"word-main"],[1,"word-title"],[1,"lao"],["class","emoji",4,"ngIf"],["type","button","aria-label","Toggle like",1,"like",3,"click"],[1,"word-info"],[1,"english"],["class","phonetic",4,"ngIf"],["class","category",4,"ngIf"],["class","phrases-section",4,"ngIf"],["class","no-phrases",4,"ngIf"],[1,"footer-actions"],["target","_blank","rel","noopener noreferrer",1,"feedback-btn",3,"href"],[1,"emoji"],[1,"phonetic"],[1,"category"],[1,"phrases-section"],[1,"phrase-list"],["class","phrase-item",4,"ngFor","ngForOf"],[1,"phrase-item"],[1,"phrase-content"],[1,"phrase-lao"],[1,"phrase-english"],["class","phrase-phonetic",4,"ngIf"],[1,"phrase-actions"],["type","button",1,"play-btn",3,"click"],[1,"phrase-phonetic"],[1,"no-phrases"],[1,"not-found"],["routerLink","/dict",1,"back-btn"]],template:function(o,r){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"header",3)(3,"a",4),e.EFF(4,"\u2190 Back to Dictionary"),e.k0s()(),e.DNE(5,y,19,10,"main",5)(6,C,5,0,"ng-template",null,0,e.C5r),e.k0s()()),2&o){const t=e.sdS(7);e.R7$(5),e.Y8G("ngIf",r.word)("ngIfElse",t)}},dependencies:[p.Wk,d.MD,d.Sq,d.bT],styles:[".page[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding:2rem}.container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#666;text-decoration:none;font-size:.9rem}.back-link[_ngcontent-%COMP%]:hover{color:#000}.word-header[_ngcontent-%COMP%]{margin-bottom:3rem;padding-bottom:2rem;border-bottom:1px solid #e5e5e5}.word-main[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.word-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.lao[_ngcontent-%COMP%]{font-size:3rem;font-weight:300;line-height:1.2}.emoji[_ngcontent-%COMP%]{font-size:3rem}.like[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font-size:2rem;line-height:1;color:#ddd;transition:color .2s ease}.like[_ngcontent-%COMP%]:hover{color:orange}.like.liked[_ngcontent-%COMP%]{color:#ff6b00}.word-info[_ngcontent-%COMP%]{margin-top:1rem}.english[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 0 .5rem;color:#000}.phonetic[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 .5rem;color:#666}.category[_ngcontent-%COMP%]{display:inline-block;background:#f0f0f0;padding:.3rem .8rem;border-radius:999px;font-size:.85rem;color:#666;margin:.5rem 0 0}.phrases-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:400;margin:0 0 1.5rem;color:#333}.phrase-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.phrase-item[_ngcontent-%COMP%]{padding:1.25rem;border:1px solid #e5e5e5;border-radius:8px;background:#fafafa;display:flex;align-items:center;justify-content:space-between;gap:1rem}.phrase-content[_ngcontent-%COMP%]{flex:1}.phrase-lao[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.phrase-english[_ngcontent-%COMP%]{color:#000;margin-bottom:.25rem}.phrase-phonetic[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.phrase-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.play-btn[_ngcontent-%COMP%]{border:1px solid #e5e5e5;background:#fff;color:#000;border-radius:999px;padding:.35rem .7rem;font-size:.9rem;cursor:pointer;white-space:nowrap;font-weight:500;transition:all .2s ease}.play-btn[_ngcontent-%COMP%]:hover{border-color:#000;background:#f5f5f5}.no-phrases[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.not-found[_ngcontent-%COMP%]{padding:3rem 0;text-align:center}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;color:#666;margin-bottom:1.5rem}.back-btn[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;background:#000;color:#fff;text-decoration:none;border-radius:8px;transition:opacity .2s ease}.back-btn[_ngcontent-%COMP%]:hover{opacity:.85}"]})}}return i})()}}]);