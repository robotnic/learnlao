"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[793],{793:(M,_,l)=>{l.r(_),l.d(_,{TopicsComponent:()=>b});var h=l(8579),m=l(177),t=l(4438),f=l(7152),C=l(5651);function k(a,d){if(1&a){const e=t.RV6();t.j41(0,"div",9),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.navigateToTopic(o.id))}),t.j41(1,"div",10)(2,"div",11)(3,"span",12),t.EFF(4),t.k0s(),t.j41(5,"div",13)(6,"div",14),t.EFF(7),t.k0s(),t.j41(8,"div",15),t.EFF(9),t.k0s()()(),t.j41(10,"button",16),t.bIt("click",function(o){const c=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.onTopicLikeClick(o,c.id))}),t.EFF(11," \u2605 "),t.k0s()(),t.j41(12,"p"),t.EFF(13),t.k0s()()}if(2&a){const e=d.$implicit,n=t.XpG();t.R7$(4),t.JRh(n.getTopicEmoji(e.id)),t.R7$(3),t.JRh(e.name_lao||e.name),t.R7$(2),t.JRh(e.name),t.R7$(),t.AVh("liked",n.likeService.isLiked("topic:"+e.id)),t.R7$(3),t.SpI("",e.words.length+e.phrases.length," items")}}function x(a,d){if(1&a){const e=t.RV6();t.j41(0,"li",27)(1,"span",28),t.EFF(2),t.k0s(),t.j41(3,"button",16),t.bIt("click",function(o){const c=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.onTopicIndexLikeClick(o,c.id))}),t.EFF(4," \u2605 "),t.k0s(),t.j41(5,"button",29),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.openTopicById(o.id))}),t.j41(6,"div",30)(7,"div",31),t.EFF(8),t.k0s(),t.j41(9,"div",32),t.EFF(10),t.k0s()()()()}if(2&a){const e=d.$implicit,n=t.XpG(3);t.R7$(2),t.JRh(n.getTopicEmoji(e.id)),t.R7$(),t.AVh("liked",n.likeService.isLiked("topic:"+e.id)),t.R7$(5),t.JRh(e.name_lao||e.name),t.R7$(2),t.JRh(e.name)}}function O(a,d){if(1&a&&(t.j41(0,"section",23)(1,"h3",24),t.EFF(2),t.k0s(),t.j41(3,"ul",25),t.DNE(4,x,11,5,"li",26),t.k0s()()),2&a){const e=d.$implicit;t.R7$(2),t.JRh(e.letter),t.R7$(2),t.Y8G("ngForOf",e.topics)}}function P(a,d){if(1&a){const e=t.RV6();t.j41(0,"section",17)(1,"div",18)(2,"h2",19),t.EFF(3),t.k0s(),t.j41(4,"button",20),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.toggleLaoSort())}),t.EFF(5),t.k0s()(),t.j41(6,"div",21),t.DNE(7,O,5,2,"section",22),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(3),t.SpI("Topic index (",e.sortByLao?"\u0e81-\u0eae":"A\u2013Z",")"),t.R7$(2),t.SpI(" ",e.sortByLao?"Sort by English":"\u0e88\u0eb1\u0e94\u0ea5\u0ebd\u0e87\u0e95\u0eb2\u0ea1\u0ead\u0eb1\u0e81\u0e29\u0ead\u0e99\u0ea5\u0eb2\u0ea7"," "),t.R7$(2),t.Y8G("ngForOf",e.topicIndexGroups)}}let b=(()=>{class a{constructor(e,n,o){this.kbService=e,this.router=n,this.likeService=o,this.topics=[],this.topicIndexGroups=[],this.pinnedTopics=[],this.sortByLao=!1}ngOnInit(){this.kbService.getKnowledgeBase().subscribe(e=>{e&&(this.topics=this.kbService.getTopics(),this.updatePinnedTopics(),this.topicIndexGroups=this.buildTopicIndexGroups(this.topics))})}toggleLaoSort(){this.sortByLao=!this.sortByLao,this.topicIndexGroups=this.buildTopicIndexGroups(this.topics)}buildTopicIndexGroups(e){const n=i=>i.trim();if(this.sortByLao)return this.buildLaoTopicIndexGroups(e);const o=e.map(i=>({...i,searchName:n(i.name)})).filter(i=>i.searchName),c=Array.from(new Set(o.map(i=>i.searchName))).map(i=>o.find(s=>s.searchName===i)).sort((i,s)=>i.name.localeCompare(s.name)),r=new Map;for(const i of c){const s=i.name.trim().charAt(0).toUpperCase(),p=/[A-Z]/.test(s)?s:"#",g=r.get(p)??[];g.push(i),r.set(p,g)}return Array.from(r.entries()).sort(([i],[s])=>i.localeCompare(s)).map(([i,s])=>({letter:i,topics:s}))}buildLaoTopicIndexGroups(e){const n=["\u0e81","\u0e82","\u0e84","\u0e87","\u0e88","\u0eaa","\u0e8a","\u0e8d","\u0e94","\u0e95","\u0e96","\u0e97","\u0e99","\u0e9a","\u0e9b","\u0e9c","\u0e9e","\u0ea1","\u0ea2","\u0ea3","\u0ea5","\u0ea7","\u0eaa","\u0eab","\u0ead"],o=new Map;for(const r of e){const s=(r.name_lao||r.name).trim().charAt(0);let p="#";-1!==n.indexOf(s)&&(p=s);const u=o.get(p)??[];u.push(r),o.set(p,u)}return[...n.filter(r=>o.has(r)),...o.has("#")?["#"]:[]].map(r=>({letter:r,topics:(o.get(r)??[]).sort((i,s)=>(i.name_lao||i.name).localeCompare(s.name_lao||s.name,"lo"))}))}navigateToTopic(e){this.router.navigate(["/dict"],{queryParams:{topic:e}})}openTopicByName(e){const n=this.topics.find(o=>o.name===e);n?this.navigateToTopic(n.id):console.warn("Topic not found:",e)}openTopicById(e){this.navigateToTopic(e)}onTopicLikeClick(e,n){e.stopPropagation(),this.likeService.toggle("topic:"+n),this.updatePinnedTopics()}onTopicIndexLikeClick(e,n){e.stopPropagation(),this.likeService.toggle("topic:"+n),this.updatePinnedTopics()}getTopicIdByName(e){return this.topics.find(o=>o.name===e)?.id||""}getTopicEmojiByName(e){const n=this.getTopicIdByName(e);return n?this.getTopicEmoji(n):"\u{1f4cc}"}getTopicEmoji(e){return this.topics.find(o=>o.id===e)?.emoji||"\u{1f4cc}"}updatePinnedTopics(){this.pinnedTopics=this.topics.filter(e=>this.likeService.isLiked("topic:"+e.id)).sort((e,n)=>e.name.localeCompare(n.name))}getFeedbackUrl(){const n=typeof window<"u"?window.location.href:"",o=this.pinnedTopics.map(i=>`${i.emoji?i.emoji+" ":""}${i.name} (${i.id})`).sort((i,s)=>i.localeCompare(s)),c=[];return n&&c.push(`Link: ${n}`),c.push("Pinned topics: "+(0===o.length?"(none)":"")),o.length>0&&c.push(...o.map(i=>`- ${i}`)),c.push(""),c.push("What is the issue?"),c.push("- [ ] A topic is missing"),c.push("- [ ] A topic name/emoji is wrong"),c.push("- [ ] A word is missing in a topic"),c.push("- [ ] A word is in the wrong topic"),c.push("- [ ] Other"),c.push(""),c.push("Which topic? (name or id):"),c.push(""),c.push("Which word? (Lao or English, if relevant):"),c.push(""),c.push("Your correction / suggestion:"),`https://github.com/robotnic/lao/issues/new?${new URLSearchParams({title:"Feedback: Topics",body:c.join("\n"),labels:"bug,enhancement"}).toString()}`}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(f.r),t.rXU(h.Ix),t.rXU(C.v))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-topics"]],standalone:!0,features:[t.aNF],decls:14,vars:3,consts:[[1,"page"],[1,"container"],[1,"header"],["routerLink","/",1,"back-link"],[1,"topics-grid"],["class","topic-card",3,"click",4,"ngFor","ngForOf"],["class","topic-index",4,"ngIf"],[1,"footer-actions"],["target","_blank","rel","noopener noreferrer",1,"feedback-btn",3,"href"],[1,"topic-card",3,"click"],[1,"topic-card-header"],[1,"topic-names"],["aria-hidden","true",1,"topic-emoji"],[1,"topic-text"],[1,"topic-lao"],[1,"topic-eng"],["type","button","aria-label","Toggle like",1,"like",3,"click"],[1,"topic-index"],[1,"topic-index-header"],[1,"topic-index-title"],["type","button",1,"sort-toggle",3,"click"],[1,"topic-index-groups"],["class","topic-index-group",4,"ngFor","ngForOf"],[1,"topic-index-group"],[1,"topic-index-letter"],[1,"topic-index-list"],["class","topic-index-item",4,"ngFor","ngForOf"],[1,"topic-index-item"],["aria-hidden","true",1,"topic-index-emoji"],["type","button",1,"topic-index-link",3,"click"],[1,"topic-index-text"],[1,"topic-index-lao"],[1,"topic-index-eng"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"a",3),t.EFF(4,"\u2190 Back"),t.k0s(),t.j41(5,"h1"),t.EFF(6,"Topics"),t.k0s()(),t.j41(7,"main")(8,"div",4),t.DNE(9,k,14,6,"div",5),t.k0s(),t.DNE(10,P,8,3,"section",6),t.j41(11,"div",7)(12,"a",8),t.EFF(13," Feedback "),t.k0s()()()()()),2&n&&(t.R7$(9),t.Y8G("ngForOf",o.pinnedTopics),t.R7$(),t.Y8G("ngIf",o.topicIndexGroups.length>0),t.R7$(2),t.Y8G("href",o.getFeedbackUrl(),t.B4B))},dependencies:[h.Wk,m.MD,m.Sq,m.bT],styles:[".page[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding:2rem}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;color:#666;text-decoration:none;font-size:.9rem}.back-link[_ngcontent-%COMP%]:hover{color:#000}h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;margin:0 0 2rem}.topics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleInFade .4s ease-out;animation-fill-mode:both}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.05s}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.1s}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.15s}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.2s}.topics-grid[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(n+6){animation-delay:.25s}.topic-index[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #f0f0f0}.topic-index-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1rem}.sort-toggle[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #e5e5e5;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.9rem;color:#333;transition:all .2s ease;white-space:nowrap;font-family:inherit}.sort-toggle[_ngcontent-%COMP%]:hover{border-color:#333;background:#f9f9f9}.sort-toggle[_ngcontent-%COMP%]:active{background:#f0f0f0}.topic-index-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:400;color:#666}.topic-index-groups[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.topic-index-letter[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.85rem;font-weight:600;color:#333;letter-spacing:.02em}.topic-index-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.topic-index-item[_ngcontent-%COMP%]{padding:.15rem 0;display:flex;align-items:center;gap:.4rem}.topic-index-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-index-item[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.topic-index-link[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font:inherit;font-size:.8rem;line-height:1.35;color:#666;text-align:left;flex:1}.topic-index-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.1rem}.topic-index-lao[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400}.topic-index-eng[_ngcontent-%COMP%]{font-size:.75rem;color:#999}.topic-index-link[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}@keyframes _ngcontent-%COMP%_scaleInFade{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.topic-card[_ngcontent-%COMP%]{padding:2rem;border:1px solid #e5e5e5;cursor:pointer;transition:all .2s ease;animation:_ngcontent-%COMP%_scaleInFade .4s ease-out}.topic-card[_ngcontent-%COMP%]:hover{border-color:#000;background:#fafafa}.topic-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;margin-bottom:.5rem}.topic-names[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8rem;flex:1}.topic-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.topic-lao[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:400;line-height:1.3}.topic-eng[_ngcontent-%COMP%]{font-size:.95rem;color:#666;line-height:1.3}.topic-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:400;flex:1;display:inline-flex;align-items:baseline;gap:.5rem}.topic-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.like[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font-size:1.5rem;line-height:1;color:#ddd;transition:color .2s ease}.like[_ngcontent-%COMP%]:hover{color:orange}.like.liked[_ngcontent-%COMP%]{color:#ff6b00}.topic-detail[_ngcontent-%COMP%]{width:100%;min-height:calc(100vh - 8rem);background:#fff;padding:0}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #e5e5e5}.detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:400}.detail-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#666;font-size:.9rem}.detail-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #e5e5e5;border-radius:8px;padding:.5rem .75rem;cursor:pointer;color:#333;font-size:.9rem}.close-btn[_ngcontent-%COMP%]:hover{border-color:#000}.vocabulary-list[_ngcontent-%COMP%]{margin-bottom:2rem}.vocabulary-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:400;margin:0 0 1rem;color:#666}.vocab-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;padding:1rem;border:1px solid #f0f0f0;margin-bottom:.5rem}.vocab-top[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:space-between;align-items:baseline;gap:1rem}.lao[_ngcontent-%COMP%]{font-size:1.5rem}.english[_ngcontent-%COMP%]{color:#000}.pronunciation[_ngcontent-%COMP%]{color:#999;font-size:.9rem}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:1rem}}"]})}}return a})()}}]);