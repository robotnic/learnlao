"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[581],{7581:(y,l,r)=>{r.r(l),r.d(l,{FsrsGameComponent:()=>w});var c=r(6610),u=r(3577),g=r(631);const p=new class f extends g.Ay{constructor(){super("LaoLearningDB"),this.version(1).stores({vocab:"id, category, usage_rank",progress:"id, state, due"})}};var t=r(3279),m=r(6409);function b(i,s){if(1&i){const n=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.selectAnswer(o))}),t.EFF(1),t.k0s()}if(2&i){const n=s.$implicit,e=t.XpG(2);t.Y8G("disabled",e.answered),t.R7$(),t.SpI(" ",n," ")}}function h(i,s){if(1&i&&(t.j41(0,"div",20)(1,"p"),t.EFF(2),t.k0s()()),2&i){const n=t.XpG(2);t.R7$(),t.AVh("correct",n.selectedCorrect)("incorrect",!n.selectedCorrect),t.R7$(),t.SpI(" ",n.selectedCorrect?"Correct! \u2713":"Incorrect. The answer is: "+n.currentQuestion.correctAnswer," ")}}function _(i,s){if(1&i){const n=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.rateCard("Again"))}),t.EFF(2,"Again"),t.k0s(),t.j41(3,"button",23),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.rateCard("Hard"))}),t.EFF(4,"Hard"),t.k0s(),t.j41(5,"button",24),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.rateCard("Good"))}),t.EFF(6,"Good"),t.k0s(),t.j41(7,"button",25),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.rateCard("Easy"))}),t.EFF(8,"Easy"),t.k0s()()}}function v(i,s){if(1&i&&(t.j41(0,"div",26)(1,"p",27),t.EFF(2),t.k0s()()),2&i){const n=t.XpG(2);t.R7$(2),t.SpI("Next question in ",n.waitingSeconds," seconds...")}}function C(i,s){if(1&i){const n=t.RV6();t.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"h2",11),t.EFF(4),t.k0s()(),t.j41(5,"div",12)(6,"button",13),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.playAudio())}),t.EFF(7," \u{1f50a} Play Audio "),t.k0s(),t.nrm(8,"audio",null,0),t.k0s(),t.j41(10,"div",14),t.DNE(11,b,2,2,"button",15),t.k0s(),t.DNE(12,h,3,5,"div",16)(13,_,9,0,"div",17)(14,v,3,1,"div",18),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(4),t.JRh(n.currentQuestion.laoWord),t.R7$(7),t.Y8G("ngForOf",n.currentQuestion.options),t.R7$(),t.Y8G("ngIf",n.answered),t.R7$(),t.Y8G("ngIf",n.answered&&n.selectedCorrect),t.R7$(),t.Y8G("ngIf",n.answered&&!n.selectedCorrect)}}function k(i,s){1&i&&(t.j41(0,"div",28)(1,"p"),t.EFF(2,"Loading..."),t.k0s()())}let w=(()=>{class i{constructor(n){this.http=n,this.currentQuestion=null,this.answered=!1,this.selectedCorrect=!1,this.accuracy=0,this.totalAnswered=0,this.correctAnswers=0,this.waitingSeconds=3,this.vocabulary=[],this.availableAudioIds=new Set}ngOnInit(){this.loadAvailableAudioIds()}loadAvailableAudioIds(){this.http.get("/assets/audio-ids.txt",{responseType:"text"}).subscribe(n=>{this.availableAudioIds=new Set(n.split("\n").map(e=>e.trim()).filter(e=>e.length>0)),this.loadVocabulary()},n=>{console.warn("Could not load audio IDs list, loading all vocabulary:",n),this.loadVocabulary()})}loadVocabulary(){this.http.get("/assets/knowledge_base.json").subscribe(n=>{let e=n.vocabulary||[];this.vocabulary=this.availableAudioIds.size>0?e.filter(o=>this.availableAudioIds.has(o.id)):e,this.vocabulary.length>0&&this.loadNextQuestion()},n=>{console.error("Failed to load vocabulary:",n)})}loadNextQuestion(){if(this.answered=!1,this.selectedCorrect=!1,this.waitingSeconds=3,0===this.vocabulary.length)return;const n=this.vocabulary[Math.floor(Math.random()*this.vocabulary.length)],e=n.english,a=[e,...this.vocabulary.filter(d=>d.id!==n.id).sort(()=>Math.random()-.5).slice(0,3).map(d=>d.english)].sort(()=>Math.random()-.5);this.currentQuestion={laoWord:n.lao,meaning:e,options:a,correctAnswer:e,wordId:n.id},setTimeout(()=>this.playAudio(),100)}playAudio(){if(!this.currentQuestion)return;const n=document.querySelector("audio");if(n&&this.currentQuestion.wordId){const e=`https://robotnic.github.io/audiofiles/audio/${this.currentQuestion.wordId}_male.mp3`;n.src=e,n.play().catch(o=>{console.debug("Audio unavailable:",e)})}}selectAnswer(n){this.answered||(this.answered=!0,this.selectedCorrect=n===this.currentQuestion?.correctAnswer,this.totalAnswered++,this.selectedCorrect&&this.correctAnswers++,this.updateAccuracy(),this.selectedCorrect||this.startWaitingTimer())}rateCard(n){if(!this.currentQuestion)return;let e="Learning";"Easy"===n||"Good"===n?e="Review":"Hard"===n?e="Learning":"Again"===n&&(e="Relearning");const o=Date.now();p.progress.put({id:this.currentQuestion.wordId,state:e,due:o+864e5,stability:2,difficulty:5,elapsed_days:0,scheduled_days:1,reps:1,lapses:"Relearning"===e?1:0,last_review:o}).then(()=>{console.log("Saved progress for:",this.currentQuestion.wordId),this.loadNextQuestion()}).catch(a=>{console.error("Error saving progress:",a),this.loadNextQuestion()})}startWaitingTimer(){this.waitingInterval&&clearInterval(this.waitingInterval),this.waitingInterval=setInterval(()=>{this.waitingSeconds--,this.waitingSeconds<=0&&(clearInterval(this.waitingInterval),this.loadNextQuestion())},1e3)}updateAccuracy(){this.accuracy=this.totalAnswered>0?Math.round(this.correctAnswers/this.totalAnswered*100):0}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(m.Qq))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-fsrs-game"]],standalone:!0,features:[t.aNF],decls:11,vars:3,consts:[["audioPlayer",""],[1,"game-container"],[1,"header"],["routerLink","/",1,"back-link"],[1,"stats"],[1,"accuracy"],["class","game-content",4,"ngIf"],["class","loading",4,"ngIf"],[1,"game-content"],[1,"question-card"],[1,"word-display"],[1,"lao-word"],[1,"audio-section"],[1,"audio-btn",3,"click"],[1,"options"],["class","option-btn",3,"disabled","click",4,"ngFor","ngForOf"],["class","feedback",4,"ngIf"],["class","rating-buttons",4,"ngIf"],["class","next-btn-container",4,"ngIf"],[1,"option-btn",3,"click","disabled"],[1,"feedback"],[1,"rating-buttons"],[1,"rating-btn","again",3,"click"],[1,"rating-btn","hard",3,"click"],[1,"rating-btn","good",3,"click"],[1,"rating-btn","easy",3,"click"],[1,"next-btn-container"],[1,"waiting"],[1,"loading"]],template:function(e,o){1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"a",3),t.EFF(3,"\u2190 Back"),t.k0s(),t.j41(4,"h1"),t.EFF(5,"Vocabulary Quiz"),t.k0s(),t.j41(6,"div",4)(7,"span",5),t.EFF(8),t.k0s()()(),t.DNE(9,C,15,5,"div",6)(10,k,3,0,"div",7),t.k0s()),2&e&&(t.R7$(8),t.SpI("Accuracy: ",o.accuracy,"%"),t.R7$(),t.Y8G("ngIf",o.currentQuestion),t.R7$(),t.Y8G("ngIf",!o.currentQuestion))},dependencies:[c.MD,c.Sq,c.bT,u.Wk],styles:[".game-container[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding:2rem;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{margin-bottom:2rem;color:#333}.back-link[_ngcontent-%COMP%]{display:inline-block;color:#666;text-decoration:none;font-size:.9rem;margin-bottom:1rem;transition:color .3s}.back-link[_ngcontent-%COMP%]:hover{color:#000}h1[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.8rem;font-weight:400}.stats[_ngcontent-%COMP%]{font-size:.95rem;color:#666}.game-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.question-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:2rem;max-width:500px;width:100%;border:1px solid #e0e0e0}.word-display[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding-bottom:2rem;border-bottom:2px solid #f0f0f0}.lao-word[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin:0;font-weight:600}.audio-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.audio-btn[_ngcontent-%COMP%]{background:#333;color:#fff;border:none;padding:.6rem 1.2rem;font-size:.9rem;border-radius:4px;cursor:pointer;transition:background .3s}.audio-btn[_ngcontent-%COMP%]:hover{background:#555}.options[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:2rem}.option-btn[_ngcontent-%COMP%]{background:#f5f5f5;border:1px solid #ddd;padding:.8rem;border-radius:4px;font-size:.95rem;cursor:pointer;transition:all .3s;font-weight:500;color:#333}.option-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#333;background:#fff}.option-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.feedback[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:1.1rem;font-weight:600}.feedback[_ngcontent-%COMP%]   p.correct[_ngcontent-%COMP%]{color:#4caf50}.feedback[_ngcontent-%COMP%]   p.incorrect[_ngcontent-%COMP%]{color:#f44336}.rating-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem}.rating-btn[_ngcontent-%COMP%]{padding:.75rem;border:none;border-radius:6px;font-size:.9rem;font-weight:600;cursor:pointer;transition:opacity .3s}.rating-btn[_ngcontent-%COMP%]:hover{opacity:.8}.rating-btn.again[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.rating-btn.hard[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.rating-btn.good[_ngcontent-%COMP%]{background:#3498db;color:#fff}.rating-btn.easy[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.next-btn-container[_ngcontent-%COMP%]{text-align:center;color:#666}.waiting[_ngcontent-%COMP%]{font-size:1rem;margin:0}.loading[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:1rem}"]})}}return i})()}}]);