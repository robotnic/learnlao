"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[793],{793:(O,g,a)=>{a.r(g),a.d(g,{TopicsComponent:()=>P});var m=a(8579),d=a(177),e=a(4438),f=a(7152),u=a(5651);function k(r,l){if(1&r){const n=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){const c=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.navigateToTopic(c.id))}),e.j41(1,"div",10)(2,"div",11)(3,"span",12),e.EFF(4),e.k0s(),e.j41(5,"div",13)(6,"div",14),e.EFF(7),e.k0s(),e.j41(8,"div",15),e.EFF(9),e.k0s()()(),e.j41(10,"button",16),e.bIt("click",function(c){const o=e.eBV(n).$implicit,p=e.XpG();return e.Njj(p.onTopicLikeClick(c,o.id))}),e.EFF(11," \u2605 "),e.k0s()(),e.j41(12,"p"),e.EFF(13),e.k0s()()}if(2&r){const n=l.$implicit,t=e.XpG();e.R7$(4),e.JRh(t.getTopicEmoji(n.id)),e.R7$(3),e.JRh(n.name_lao||n.name),e.R7$(2),e.JRh(n.name),e.R7$(),e.AVh("liked",t.likeService.isLiked("topic:"+n.id)),e.R7$(3),e.SpI("",n.words.length+n.phrases.length," items")}}function x(r,l){if(1&r){const n=e.RV6();e.j41(0,"li",25)(1,"span",26),e.EFF(2),e.k0s(),e.j41(3,"button",16),e.bIt("click",function(c){const o=e.eBV(n).$implicit,p=e.XpG(3);return e.Njj(p.onTopicIndexLikeClick(c,o.id))}),e.EFF(4," \u2605 "),e.k0s(),e.j41(5,"button",27),e.bIt("click",function(){const c=e.eBV(n).$implicit,o=e.XpG(3);return e.Njj(o.openTopicById(c.id))}),e.j41(6,"div",28)(7,"div",29),e.EFF(8),e.k0s(),e.j41(9,"div",30),e.EFF(10),e.k0s()()()()}if(2&r){const n=l.$implicit,t=e.XpG(3);e.R7$(2),e.JRh(t.getTopicEmoji(n.id)),e.R7$(),e.AVh("liked",t.likeService.isLiked("topic:"+n.id)),e.R7$(5),e.JRh(n.name_lao||n.name),e.R7$(2),e.JRh(n.name)}}function C(r,l){if(1&r&&(e.j41(0,"section",21)(1,"h3",22),e.EFF(2),e.k0s(),e.j41(3,"ul",23),e.DNE(4,x,11,5,"li",24),e.k0s()()),2&r){const n=l.$implicit;e.R7$(2),e.JRh(n.letter),e.R7$(2),e.Y8G("ngForOf",n.topics)}}function b(r,l){if(1&r&&(e.j41(0,"section",17)(1,"h2",18),e.EFF(2,"Topic index (A\u2013Z)"),e.k0s(),e.j41(3,"div",19),e.DNE(4,C,5,2,"section",20),e.k0s()()),2&r){const n=e.XpG();e.R7$(4),e.Y8G("ngForOf",n.topicIndexGroups)}}let P=(()=>{class r{constructor(n,t,c){this.kbService=n,this.router=t,this.likeService=c,this.topics=[],this.topicIndexGroups=[],this.pinnedTopics=[]}ngOnInit(){this.kbService.getKnowledgeBase().subscribe(n=>{n&&(this.topics=this.kbService.getTopics(),this.updatePinnedTopics(),this.topicIndexGroups=this.buildTopicIndexGroups(this.topics))})}buildTopicIndexGroups(n){const t=i=>i.trim(),c=n.map(i=>({...i,searchName:t(i.name)})).filter(i=>i.searchName),o=Array.from(new Set(c.map(i=>i.searchName))).map(i=>c.find(s=>s.searchName===i)).sort((i,s)=>i.name.localeCompare(s.name)),p=new Map;for(const i of o){const s=i.name.trim().charAt(0).toUpperCase(),_=/[A-Z]/.test(s)?s:"#",h=p.get(_)??[];h.push(i),p.set(_,h)}return Array.from(p.entries()).sort(([i],[s])=>i.localeCompare(s)).map(([i,s])=>({letter:i,topics:s}))}navigateToTopic(n){this.router.navigate(["/dict"],{queryParams:{topic:n}})}openTopicByName(n){const t=this.topics.find(c=>c.name===n);t?this.navigateToTopic(t.id):console.warn("Topic not found:",n)}openTopicById(n){this.navigateToTopic(n)}onTopicLikeClick(n,t){n.stopPropagation(),this.likeService.toggle("topic:"+t),this.updatePinnedTopics()}onTopicIndexLikeClick(n,t){n.stopPropagation(),this.likeService.toggle("topic:"+t),this.updatePinnedTopics()}getTopicIdByName(n){return this.topics.find(c=>c.name===n)?.id||""}getTopicEmojiByName(n){const t=this.getTopicIdByName(n);return t?this.getTopicEmoji(t):"\u{1f4cc}"}getTopicEmoji(n){return this.topics.find(c=>c.id===n)?.emoji||"\u{1f4cc}"}updatePinnedTopics(){this.pinnedTopics=this.topics.filter(n=>this.likeService.isLiked("topic:"+n.id)).sort((n,t)=>n.name.localeCompare(t.name))}getFeedbackUrl(){const t=typeof window<"u"?window.location.href:"",c=this.pinnedTopics.map(i=>`${i.emoji?i.emoji+" ":""}${i.name} (${i.id})`).sort((i,s)=>i.localeCompare(s)),o=[];return t&&o.push(`Link: ${t}`),o.push("Pinned topics: "+(0===c.length?"(none)":"")),c.length>0&&o.push(...c.map(i=>`- ${i}`)),o.push(""),o.push("What is the issue?"),o.push("- [ ] A topic is missing"),o.push("- [ ] A topic name/emoji is wrong"),o.push("- [ ] A word is missing in a topic"),o.push("- [ ] A word is in the wrong topic"),o.push("- [ ] Other"),o.push(""),o.push("Which topic? (name or id):"),o.push(""),o.push("Which word? (Lao or English, if relevant):"),o.push(""),o.push("Your correction / suggestion:"),`https://github.com/robotnic/lao/issues/new?${new URLSearchParams({title:"Feedback: Topics",body:o.join("\n"),labels:"bug,enhancement"}).toString()}`}static{this.\u0275fac=function(t){return new(t||r)(e.rXU(f.r),e.rXU(m.Ix),e.rXU(u.v))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-topics"]],standalone:!0,features:[e.aNF],decls:14,vars:3,consts:[[1,"page"],[1,"container"],[1,"header"],["routerLink","/",1,"back-link"],[1,"topics-grid"],["class","topic-card",3,"click",4,"ngFor","ngForOf"],["class","topic-index",4,"ngIf"],[1,"footer-actions"],["target","_blank","rel","noopener noreferrer",1,"feedback-btn",3,"href"],[1,"topic-card",3,"click"],[1,"topic-card-header"],[1,"topic-names"],["aria-hidden","true",1,"topic-emoji"],[1,"topic-text"],[1,"topic-lao"],[1,"topic-eng"],["type","button","aria-label","Toggle like",1,"like",3,"click"],[1,"topic-index"],[1,"topic-index-title"],[1,"topic-index-groups"],["class","topic-index-group",4,"ngFor","ngForOf"],[1,"topic-index-group"],[1,"topic-index-letter"],[1,"topic-index-list"],["class","topic-index-item",4,"ngFor","ngForOf"],[1,"topic-index-item"],["aria-hidden","true",1,"topic-index-emoji"],["type","button",1,"topic-index-link",3,"click"],[1,"topic-index-text"],[1,"topic-index-lao"],[1,"topic-index-eng"]],template:function(t,c){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"a",3),e.EFF(4,"\u2190 Back"),e.k0s(),e.j41(5,"h1"),e.EFF(6,"Topics"),e.k0s()(),e.j41(7,"main")(8,"div",4),e.DNE(9,k,14,6,"div",5),e.k0s(),e.DNE(10,b,5,1,"section",6),e.j41(11,"div",7)(12,"a",8),e.EFF(13," Feedback "),e.k0s()()()()()),2&t&&(e.R7$(9),e.Y8G("ngForOf",c.pinnedTopics),e.R7$(),e.Y8G("ngIf",c.topicIndexGroups.length>0),e.R7$(2),e.Y8G("href",c.getFeedbackUrl(),e.B4B))},dependencies:[m.Wk,d.MD,d.Sq,d.bT],styles:[".page[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding:2rem}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;color:#666;text-decoration:none;font-size:.9rem}.back-link[_ngcontent-%COMP%]:hover{color:#000}h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;margin:0 0 2rem}.topics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.topic-index[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #f0f0f0}.topic-index-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:400;color:#666}.topic-index-groups[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.topic-index-letter[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.85rem;font-weight:600;color:#333;letter-spacing:.02em}.topic-index-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.topic-index-item[_ngcontent-%COMP%]{padding:.15rem 0;display:flex;align-items:center;gap:.4rem}.topic-index-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-index-item[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.topic-index-link[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font:inherit;font-size:.8rem;line-height:1.35;color:#666;text-align:left;flex:1}.topic-index-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.1rem}.topic-index-lao[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400}.topic-index-eng[_ngcontent-%COMP%]{font-size:.75rem;color:#999}.topic-index-link[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}.topic-card[_ngcontent-%COMP%]{padding:2rem;border:1px solid #e5e5e5;cursor:pointer;transition:all .2s ease}.topic-card[_ngcontent-%COMP%]:hover{border-color:#000;background:#fafafa}.topic-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;margin-bottom:.5rem}.topic-names[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8rem;flex:1}.topic-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.topic-lao[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:400;line-height:1.3}.topic-eng[_ngcontent-%COMP%]{font-size:.95rem;color:#666;line-height:1.3}.topic-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:400;flex:1;display:inline-flex;align-items:baseline;gap:.5rem}.topic-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.like[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font-size:1.5rem;line-height:1;color:#ddd;transition:color .2s ease}.like[_ngcontent-%COMP%]:hover{color:orange}.like.liked[_ngcontent-%COMP%]{color:#ff6b00}.topic-detail[_ngcontent-%COMP%]{width:100%;min-height:calc(100vh - 8rem);background:#fff;padding:0}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #e5e5e5}.detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:400}.detail-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#666;font-size:.9rem}.detail-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #e5e5e5;border-radius:8px;padding:.5rem .75rem;cursor:pointer;color:#333;font-size:.9rem}.close-btn[_ngcontent-%COMP%]:hover{border-color:#000}.vocabulary-list[_ngcontent-%COMP%]{margin-bottom:2rem}.vocabulary-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:400;margin:0 0 1rem;color:#666}.vocab-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;padding:1rem;border:1px solid #f0f0f0;margin-bottom:.5rem}.vocab-top[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:space-between;align-items:baseline;gap:1rem}.lao[_ngcontent-%COMP%]{font-size:1.5rem}.english[_ngcontent-%COMP%]{color:#000}.pronunciation[_ngcontent-%COMP%]{color:#999;font-size:.9rem}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:1rem}}"]})}}return r})()}}]);