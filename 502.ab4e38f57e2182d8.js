"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[502],{2502:(R,c,s)=>{s.r(c),s.d(c,{ProgressComponent:()=>F});var l=s(177),m=s(9772),e=s(4438),p=s(467),f=s(8993),g=s(6885),v=s(6648);let b=(()=>{class n{constructor(){this.TOTAL_WORDS=2e3}getStats(){return(0,v.H)(this.calculateStats())}calculateStats(){var t=this;return(0,p.A)(function*(){const r=yield f.db.progress.toArray(),i={new:r.filter(o=>o.state===g.Uw.New).length,learning:r.filter(o=>o.state===g.Uw.Learning).length,review:r.filter(o=>o.state===g.Uw.Review).length,relearning:r.filter(o=>o.state===g.Uw.Relearning).length},d=i.learning+i.review+i.relearning,j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((o,G)=>({day:o,count:0}));return{overall:{activePercent:d/t.TOTAL_WORDS*100,grayPercent:100-d/t.TOTAL_WORDS*100},states:[{label:"Unseen",val:i.new,color:"bg-gray-500"},{label:"Learning",val:i.learning,color:"bg-blue-400"},{label:"Mastered",val:i.review,color:"bg-green-500"},{label:"Lapses",val:i.relearning,color:"bg-red-500"}],weekly:j}})()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h(n,a){if(1&n&&e.nrm(0,"div",28),2&n){const t=e.XpG().ngIf;e.xc7("width",t.states[2].val/2e3*100,"%"),e.Y8G("title","Mastered: "+t.states[2].val)}}function u(n,a){if(1&n&&e.nrm(0,"div",29),2&n){const t=e.XpG().ngIf;e.xc7("width",t.states[1].val/2e3*100,"%"),e.Y8G("title","Learning: "+t.states[1].val)}}function x(n,a){if(1&n&&e.nrm(0,"div",30),2&n){const t=e.XpG().ngIf;e.xc7("width",t.states[3].val/2e3*100,"%"),e.Y8G("title","Lapses: "+t.states[3].val)}}function _(n,a){if(1&n&&e.nrm(0,"div",31),2&n){const t=e.XpG().ngIf;e.xc7("width",t.states[0].val/2e3*100,"%"),e.Y8G("title","Unseen: "+t.states[0].val)}}function C(n,a){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"div",33),e.j41(2,"div",34)(3,"span",35),e.EFF(4,"Mastered"),e.k0s(),e.j41(5,"span",36),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().ngIf;e.R7$(6),e.JRh(t.states[2].val)}}function k(n,a){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"div",37),e.j41(2,"div",34)(3,"span",35),e.EFF(4,"Learning"),e.k0s(),e.j41(5,"span",36),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().ngIf;e.R7$(6),e.JRh(t.states[1].val)}}function P(n,a){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"div",38),e.j41(2,"div",34)(3,"span",35),e.EFF(4,"Lapses"),e.k0s(),e.j41(5,"span",36),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().ngIf;e.R7$(6),e.JRh(t.states[3].val)}}function y(n,a){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"div",39),e.j41(2,"div",34)(3,"span",35),e.EFF(4,"Unseen"),e.k0s(),e.j41(5,"span",36),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().ngIf;e.R7$(6),e.JRh(t.states[0].val)}}function O(n,a){if(1&n&&(e.j41(0,"div",40)(1,"div",41),e.EFF(2),e.k0s(),e.j41(3,"div",42),e.EFF(4),e.k0s()()),2&n){const t=a.$implicit;e.Y8G("ngClass",t.color),e.R7$(2),e.JRh(t.val),e.R7$(2),e.JRh(t.label)}}function w(n,a){if(1&n&&(e.j41(0,"div",43)(1,"div",44),e.nrm(2,"div",45),e.k0s(),e.j41(3,"div",46),e.EFF(4),e.k0s()()),2&n){const t=a.$implicit;e.R7$(2),e.xc7("height",100*t.count/50,"%"),e.R7$(2),e.JRh(t.day)}}function M(n,a){if(1&n&&(e.j41(0,"main")(1,"div",5)(2,"div",6),e.qSk(),e.j41(3,"svg",7),e.nrm(4,"circle",8)(5,"circle",9),e.k0s(),e.joV(),e.j41(6,"div",10)(7,"div",11),e.EFF(8),e.nI1(9,"number"),e.k0s(),e.j41(10,"div",12),e.EFF(11,"Learned"),e.k0s()()()(),e.j41(12,"div",13)(13,"h2"),e.EFF(14,"Vocabulary States"),e.k0s(),e.j41(15,"div",14)(16,"div",15)(17,"div",16),e.DNE(18,h,1,3,"div",17)(19,u,1,3,"div",18)(20,x,1,3,"div",19)(21,_,1,3,"div",20),e.k0s()(),e.j41(22,"div",21),e.DNE(23,C,7,1,"div",22)(24,k,7,1,"div",22)(25,P,7,1,"div",22)(26,y,7,1,"div",22),e.k0s()(),e.j41(27,"div",23),e.DNE(28,O,5,3,"div",24),e.k0s()(),e.j41(29,"div",25)(30,"h2"),e.EFF(31,"Weekly Activity"),e.k0s(),e.j41(32,"div",26),e.DNE(33,w,5,3,"div",27),e.k0s()()()),2&n){const t=a.ngIf;e.R7$(5),e.xc7("stroke-dashoffset",282.7*(1-t.overall.activePercent/100)),e.R7$(3),e.SpI("",e.i5U(9,13,t.overall.activePercent,"1.0-0"),"%"),e.R7$(10),e.Y8G("ngIf",t.states[2].val>0),e.R7$(),e.Y8G("ngIf",t.states[1].val>0),e.R7$(),e.Y8G("ngIf",t.states[3].val>0),e.R7$(),e.Y8G("ngIf",t.states[0].val>0),e.R7$(2),e.Y8G("ngIf",t.states[2].val>0),e.R7$(),e.Y8G("ngIf",t.states[1].val>0),e.R7$(),e.Y8G("ngIf",t.states[3].val>0),e.R7$(),e.Y8G("ngIf",t.states[0].val>0),e.R7$(2),e.Y8G("ngForOf",t.states),e.R7$(5),e.Y8G("ngForOf",t.weekly)}}let F=(()=>{class n{constructor(t){this.progressService=t,this.stats$=this.progressService.getStats()}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(b))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-progress"]],standalone:!0,features:[e.aNF],decls:9,vars:3,consts:[[1,"page"],[1,"container"],[1,"header"],["routerLink","/",1,"back-link"],[4,"ngIf"],[1,"overall-section"],[1,"progress-circle"],["viewBox","0 0 100 100"],["cx","50","cy","50","r","45",1,"bg-circle"],["cx","50","cy","50","r","45",1,"progress-bar"],[1,"circle-content"],[1,"percentage"],[1,"label"],[1,"states-section"],[1,"stacked-bar-container"],[1,"stacked-bar-wrapper"],[1,"stacked-bar"],["class","bar-segment bg-green-500",3,"width","title",4,"ngIf"],["class","bar-segment bg-blue-400",3,"width","title",4,"ngIf"],["class","bar-segment bg-red-500",3,"width","title",4,"ngIf"],["class","bar-segment bg-gray-500",3,"width","title",4,"ngIf"],[1,"bar-legend"],["class","legend-item",4,"ngIf"],[1,"state-grid",2,"margin-top","2rem"],["class","state-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"weekly-section"],[1,"weekly-chart"],["class","day-bar",4,"ngFor","ngForOf"],[1,"bar-segment","bg-green-500",3,"title"],[1,"bar-segment","bg-blue-400",3,"title"],[1,"bar-segment","bg-red-500",3,"title"],[1,"bar-segment","bg-gray-500",3,"title"],[1,"legend-item"],[1,"legend-color","bg-green-500"],[1,"legend-text"],[1,"legend-label"],[1,"legend-count"],[1,"legend-color","bg-blue-400"],[1,"legend-color","bg-red-500"],[1,"legend-color","bg-gray-500"],[1,"state-card",3,"ngClass"],[1,"state-value"],[1,"state-label"],[1,"day-bar"],[1,"bar-wrapper"],[1,"bar"],[1,"day-label"]],template:function(r,i){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"a",3),e.EFF(4,"\u2190 Back"),e.k0s(),e.j41(5,"h1"),e.EFF(6,"Learning Progress"),e.k0s()(),e.DNE(7,M,34,16,"main",4),e.nI1(8,"async"),e.k0s()()),2&r&&(e.R7$(7),e.Y8G("ngIf",e.bMT(8,1,i.stats$)))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.Jj,l.QX,m.Wk],styles:[".page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding:2rem}.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;text-decoration:none;cursor:pointer}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}h2[_ngcontent-%COMP%]{color:#555;margin-bottom:1.5rem}.overall-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;text-align:center;box-shadow:0 2px 8px #0000001a}.progress-circle[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;margin:0 auto}svg[_ngcontent-%COMP%]{width:100%;height:100%;transform:rotate(-90deg)}.bg-circle[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:8}.progress-bar[_ngcontent-%COMP%]{fill:none;stroke:#4caf50;stroke-width:8;stroke-linecap:round;stroke-dasharray:282.7;transition:stroke-dashoffset .3s}.circle-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.percentage[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333}.label[_ngcontent-%COMP%]{font-size:1rem;color:#999;margin-top:.5rem}.states-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 8px #0000001a}.stacked-bar-container[_ngcontent-%COMP%]{margin-bottom:2rem;display:flex;flex-direction:column;gap:1.5rem}.stacked-bar-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.stacked-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:40px;width:100%;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.bar-segment[_ngcontent-%COMP%]{flex:0 1 auto;transition:opacity .3s;cursor:pointer;min-width:4px}.bar-segment[_ngcontent-%COMP%]:hover{opacity:.8}.bar-legend[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px}.legend-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.legend-label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.9rem}.legend-count[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.state-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem}.state-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:8px;text-align:center;color:#fff;font-weight:600}.bg-gray-500[_ngcontent-%COMP%]{background:#9ca3af}.bg-blue-400[_ngcontent-%COMP%]{background:#60a5fa}.bg-green-500[_ngcontent-%COMP%]{background:#10b981}.bg-red-500[_ngcontent-%COMP%]{background:#ef4444}.state-value[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:.5rem}.state-label[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.weekly-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}.weekly-chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;height:200px;gap:1rem}.day-bar[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.bar-wrapper[_ngcontent-%COMP%]{width:100%;height:150px;display:flex;align-items:flex-end;justify-content:center}.bar[_ngcontent-%COMP%]{width:80%;max-width:40px;background:#60a5fa;border-radius:4px 4px 0 0;min-height:4px}.day-label[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.85rem;color:#666;font-weight:500}"]})}}return n})()}}]);