"use strict";(self.webpackChunklearnlao=self.webpackChunklearnlao||[]).push([[793],{793:(P,u,l)=>{l.r(u),l.d(u,{TopicsComponent:()=>T});var h=l(9772),m=l(177),e=l(4438),f=l(8658),k=l(5651);function C(a,d){if(1&a){const t=e.RV6();e.j41(0,"div",9),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.navigateToTopic(i.id))}),e.j41(1,"div",10)(2,"div",11)(3,"span",12),e.EFF(4),e.k0s(),e.j41(5,"div",13)(6,"div",14),e.EFF(7),e.k0s(),e.j41(8,"div",15),e.EFF(9),e.k0s()()(),e.j41(10,"button",16),e.bIt("click",function(i){const c=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onTopicLikeClick(i,c.id))}),e.EFF(11," \u2605 "),e.k0s()(),e.j41(12,"p"),e.EFF(13),e.k0s()()}if(2&a){const t=d.$implicit,n=e.XpG();e.AVh("animate-in",t.id===n.animatingTopicId)("animate-out",n.fadingOutTopicIds.has(t.id)),e.R7$(4),e.JRh(n.getTopicEmoji(t.id)),e.R7$(3),e.JRh(t.name_lao||t.name),e.R7$(2),e.JRh(t.name),e.R7$(),e.AVh("liked",n.likeService.isLiked("topic:"+t.id)),e.R7$(3),e.SpI("",t.words.length+t.phrases.length," items")}}function x(a,d){if(1&a){const t=e.RV6();e.j41(0,"li",27)(1,"span",28),e.EFF(2),e.k0s(),e.j41(3,"button",16),e.bIt("click",function(i){const c=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.onTopicIndexLikeClick(i,c.id))}),e.EFF(4," \u2605 "),e.k0s(),e.j41(5,"button",29),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.openTopicById(i.id))}),e.j41(6,"div",30)(7,"div",31),e.EFF(8),e.k0s(),e.j41(9,"div",32),e.EFF(10),e.k0s()()()()}if(2&a){const t=d.$implicit,n=e.XpG(3);e.R7$(2),e.JRh(n.getTopicEmoji(t.id)),e.R7$(),e.AVh("liked",n.likeService.isLiked("topic:"+t.id)),e.R7$(5),e.JRh(t.name_lao||t.name),e.R7$(2),e.JRh(t.name)}}function O(a,d){if(1&a&&(e.j41(0,"section",23)(1,"h3",24),e.EFF(2),e.k0s(),e.j41(3,"ul",25),e.DNE(4,x,11,5,"li",26),e.k0s()()),2&a){const t=d.$implicit;e.R7$(2),e.JRh(t.letter),e.R7$(2),e.Y8G("ngForOf",t.topics)}}function b(a,d){if(1&a){const t=e.RV6();e.j41(0,"section",17)(1,"div",18)(2,"h2",19),e.EFF(3),e.k0s(),e.j41(4,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleLaoSort())}),e.EFF(5),e.k0s()(),e.j41(6,"div",21),e.DNE(7,O,5,2,"section",22),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(3),e.SpI("Topic index (",t.sortByLao?"\u0e81-\u0eae":"A\u2013Z",")"),e.R7$(2),e.SpI(" ",t.sortByLao?"Sort by English":"\u0e88\u0eb1\u0e94\u0ea5\u0ebd\u0e87\u0e95\u0eb2\u0ea1\u0ead\u0eb1\u0e81\u0e29\u0ead\u0e99\u0ea5\u0eb2\u0ea7"," "),e.R7$(2),e.Y8G("ngForOf",t.topicIndexGroups)}}let T=(()=>{class a{constructor(t,n,i){this.kbService=t,this.router=n,this.likeService=i,this.topics=[],this.topicIndexGroups=[],this.pinnedTopics=[],this.sortByLao=!1,this.animatingTopicId=null,this.fadingOutTopicIds=new Set}ngOnInit(){this.kbService.getKnowledgeBase().subscribe(t=>{t&&(this.topics=this.kbService.getTopics(),this.updatePinnedTopics(),this.topicIndexGroups=this.buildTopicIndexGroups(this.topics))})}toggleLaoSort(){this.sortByLao=!this.sortByLao,this.topicIndexGroups=this.buildTopicIndexGroups(this.topics)}buildTopicIndexGroups(t){const n=o=>o.trim();if(this.sortByLao)return this.buildLaoTopicIndexGroups(t);const i=t.map(o=>({...o,searchName:n(o.name)})).filter(o=>o.searchName),c=Array.from(new Set(i.map(o=>o.searchName))).map(o=>i.find(s=>s.searchName===o)).sort((o,s)=>o.name.localeCompare(s.name)),r=new Map;for(const o of c){const s=o.name.trim().charAt(0).toUpperCase(),p=/[A-Z]/.test(s)?s:"#",g=r.get(p)??[];g.push(o),r.set(p,g)}return Array.from(r.entries()).sort(([o],[s])=>o.localeCompare(s)).map(([o,s])=>({letter:o,topics:s}))}buildLaoTopicIndexGroups(t){const n=["\u0e81","\u0e82","\u0e84","\u0e87","\u0e88","\u0eaa","\u0e8a","\u0e8d","\u0e94","\u0e95","\u0e96","\u0e97","\u0e99","\u0e9a","\u0e9b","\u0e9c","\u0e9e","\u0ea1","\u0ea2","\u0ea3","\u0ea5","\u0ea7","\u0eaa","\u0eab","\u0ead"],i=new Map;for(const r of t){const s=(r.name_lao||r.name).trim().charAt(0);let p="#";-1!==n.indexOf(s)&&(p=s);const _=i.get(p)??[];_.push(r),i.set(p,_)}return[...n.filter(r=>i.has(r)),...i.has("#")?["#"]:[]].map(r=>({letter:r,topics:(i.get(r)??[]).sort((o,s)=>(o.name_lao||o.name).localeCompare(s.name_lao||s.name,"lo"))}))}navigateToTopic(t){this.router.navigate(["/dict"],{queryParams:{topic:t}})}openTopicByName(t){const n=this.topics.find(i=>i.name===t);n?this.navigateToTopic(n.id):console.warn("Topic not found:",t)}openTopicById(t){this.navigateToTopic(t)}onTopicLikeClick(t,n){t.stopPropagation(),this.likeService.isLiked("topic:"+n)?(this.fadingOutTopicIds.add(n),setTimeout(()=>{this.likeService.toggle("topic:"+n),this.updatePinnedTopics(),this.fadingOutTopicIds.delete(n)},2e3)):(this.likeService.toggle("topic:"+n),this.updatePinnedTopics(),this.animatingTopicId=n,setTimeout(()=>{this.animatingTopicId=null},2e3))}onTopicIndexLikeClick(t,n){t.stopPropagation(),this.likeService.isLiked("topic:"+n)?(this.fadingOutTopicIds.add(n),setTimeout(()=>{this.likeService.toggle("topic:"+n),this.updatePinnedTopics(),this.fadingOutTopicIds.delete(n)},2e3)):(this.likeService.toggle("topic:"+n),this.updatePinnedTopics(),this.animatingTopicId=n,setTimeout(()=>{this.animatingTopicId=null},2e3))}getTopicIdByName(t){return this.topics.find(i=>i.name===t)?.id||""}getTopicEmojiByName(t){const n=this.getTopicIdByName(t);return n?this.getTopicEmoji(n):"\u{1f4cc}"}getTopicEmoji(t){return this.topics.find(i=>i.id===t)?.emoji||"\u{1f4cc}"}updatePinnedTopics(){this.pinnedTopics=this.topics.filter(t=>this.likeService.isLiked("topic:"+t.id)).sort((t,n)=>t.name.localeCompare(n.name))}getFeedbackUrl(){const n=typeof window<"u"?window.location.href:"",i=this.pinnedTopics.map(o=>`${o.emoji?o.emoji+" ":""}${o.name} (${o.id})`).sort((o,s)=>o.localeCompare(s)),c=[];return n&&c.push(`Link: ${n}`),c.push("Pinned topics: "+(0===i.length?"(none)":"")),i.length>0&&c.push(...i.map(o=>`- ${o}`)),c.push(""),c.push("What is the issue?"),c.push("- [ ] A topic is missing"),c.push("- [ ] A topic name/emoji is wrong"),c.push("- [ ] A word is missing in a topic"),c.push("- [ ] A word is in the wrong topic"),c.push("- [ ] Other"),c.push(""),c.push("Which topic? (name or id):"),c.push(""),c.push("Which word? (Lao or English, if relevant):"),c.push(""),c.push("Your correction / suggestion:"),`https://github.com/robotnic/lao/issues/new?${new URLSearchParams({title:"Feedback: Topics",body:c.join("\n"),labels:"bug,enhancement"}).toString()}`}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(f.r),e.rXU(h.Ix),e.rXU(k.v))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-topics"]],standalone:!0,features:[e.aNF],decls:14,vars:3,consts:[[1,"page"],[1,"container"],[1,"header"],["routerLink","/",1,"back-link"],[1,"topics-grid"],["class","topic-card",3,"animate-in","animate-out","click",4,"ngFor","ngForOf"],["class","topic-index",4,"ngIf"],[1,"footer-actions"],["target","_blank","rel","noopener noreferrer",1,"feedback-btn",3,"href"],[1,"topic-card",3,"click"],[1,"topic-card-header"],[1,"topic-names"],["aria-hidden","true",1,"topic-emoji"],[1,"topic-text"],[1,"topic-lao"],[1,"topic-eng"],["type","button","aria-label","Toggle like",1,"like",3,"click"],[1,"topic-index"],[1,"topic-index-header"],[1,"topic-index-title"],["type","button",1,"sort-toggle",3,"click"],[1,"topic-index-groups"],["class","topic-index-group",4,"ngFor","ngForOf"],[1,"topic-index-group"],[1,"topic-index-letter"],[1,"topic-index-list"],["class","topic-index-item",4,"ngFor","ngForOf"],[1,"topic-index-item"],["aria-hidden","true",1,"topic-index-emoji"],["type","button",1,"topic-index-link",3,"click"],[1,"topic-index-text"],[1,"topic-index-lao"],[1,"topic-index-eng"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"header",2)(3,"a",3),e.EFF(4,"\u2190 Back"),e.k0s(),e.j41(5,"h1"),e.EFF(6,"Topics"),e.k0s()(),e.j41(7,"main")(8,"div",4),e.DNE(9,C,14,10,"div",5),e.k0s(),e.DNE(10,b,8,3,"section",6),e.j41(11,"div",7)(12,"a",8),e.EFF(13," Feedback "),e.k0s()()()()()),2&n&&(e.R7$(9),e.Y8G("ngForOf",i.pinnedTopics),e.R7$(),e.Y8G("ngIf",i.topicIndexGroups.length>0),e.R7$(2),e.Y8G("href",i.getFeedbackUrl(),e.B4B))},dependencies:[h.Wk,m.MD,m.Sq,m.bT],styles:[".page[_ngcontent-%COMP%]{min-height:100vh;background:#fff;padding:2rem}.container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.back-link[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem;color:#666;text-decoration:none;font-size:.9rem}.back-link[_ngcontent-%COMP%]:hover{color:#000}h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;margin:0 0 2rem}.topics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.topic-index[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #f0f0f0}.topic-index-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1rem}.sort-toggle[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #e5e5e5;border-radius:4px;padding:.5rem 1rem;cursor:pointer;font-size:.9rem;color:#333;transition:all .2s ease;white-space:nowrap;font-family:inherit}.sort-toggle[_ngcontent-%COMP%]:hover{border-color:#333;background:#f9f9f9}.sort-toggle[_ngcontent-%COMP%]:active{background:#f0f0f0}.topic-index-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:400;color:#666}.topic-index-groups[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.topic-index-letter[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.85rem;font-weight:600;color:#333;letter-spacing:.02em}.topic-index-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.topic-index-item[_ngcontent-%COMP%]{padding:.15rem 0;display:flex;align-items:center;gap:.4rem}.topic-index-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-index-item[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.topic-index-link[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font:inherit;font-size:.8rem;line-height:1.35;color:#666;text-align:left;flex:1}.topic-index-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.1rem}.topic-index-lao[_ngcontent-%COMP%]{font-size:.85rem;font-weight:400}.topic-index-eng[_ngcontent-%COMP%]{font-size:.75rem;color:#999}.topic-index-link[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}@keyframes _ngcontent-%COMP%_scaleInFade{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleInFadeSlow{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleOutFade{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}.topic-card[_ngcontent-%COMP%]{padding:2rem;border:1px solid #e5e5e5;cursor:pointer;transition:all .2s ease}.topic-card.animate-in[_ngcontent-%COMP%]{transition:none!important;animation:_ngcontent-%COMP%_scaleInFade 2s ease-out forwards;will-change:opacity,transform}.topic-card.animate-out[_ngcontent-%COMP%]{transition:none!important;animation:_ngcontent-%COMP%_scaleOutFade 2s ease-out forwards;will-change:opacity,transform}.topic-card[_ngcontent-%COMP%]:hover{border-color:#000;background:#fafafa}.topic-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;margin-bottom:.5rem}.topic-names[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8rem;flex:1}.topic-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.topic-lao[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:400;line-height:1.3}.topic-eng[_ngcontent-%COMP%]{font-size:.95rem;color:#666;line-height:1.3}.topic-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:400;flex:1;display:inline-flex;align-items:baseline;gap:.5rem}.topic-emoji[_ngcontent-%COMP%]{font-size:1em;line-height:1;flex-shrink:0}.topic-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.like[_ngcontent-%COMP%]{appearance:none;background:none;border:none;padding:0;margin:0;cursor:pointer;font-size:1.5rem;line-height:1;color:#ddd;transition:color .2s ease}.like[_ngcontent-%COMP%]:hover{color:orange}.like.liked[_ngcontent-%COMP%]{color:#ff6b00}.topic-detail[_ngcontent-%COMP%]{width:100%;min-height:calc(100vh - 8rem);background:#fff;padding:0}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #e5e5e5}.detail-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:400}.detail-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#666;font-size:.9rem}.detail-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{appearance:none;background:#fff;border:1px solid #e5e5e5;border-radius:8px;padding:.5rem .75rem;cursor:pointer;color:#333;font-size:.9rem}.close-btn[_ngcontent-%COMP%]:hover{border-color:#000}.vocabulary-list[_ngcontent-%COMP%]{margin-bottom:2rem}.vocabulary-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:400;margin:0 0 1rem;color:#666}.vocab-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;padding:1rem;border:1px solid #f0f0f0;margin-bottom:.5rem}.vocab-top[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;justify-content:space-between;align-items:baseline;gap:1rem}.lao[_ngcontent-%COMP%]{font-size:1.5rem}.english[_ngcontent-%COMP%]{color:#000}.pronunciation[_ngcontent-%COMP%]{color:#999;font-size:.9rem}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:1rem}}"]})}}return a})()}}]);